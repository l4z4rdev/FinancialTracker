@page "/info"
@inject TransactionService TransactionService

<div class="info-page">
<h2>📘 O aplikaciji</h2>
<p>Finansijski Tracker vam omogućava da pratite prihode, rashode i štednju.</p>

<h3>Uputstvo</h3>
<ul>
    <li>➕ Dodajte kategorije u "Kategorije" ekranu</li>
    <li>📊 Pratite balans i pregled po kategorijama</li>
    <li>⚙️ Podesite dnevni limit troškova</li>
</ul>
<br>
<h3>🗑️ Brisanje podataka</h3>
<div class="delete-data">
    <ul class="delete-buttons-list">
        <li><button class="btn btn-danger btn-large" @onclick='() => ConfirmDelete("transactions")'>Obriši sve transakcije</button></li>
        <li><button class="btn btn-danger btn-large" @onclick='() => ConfirmDelete("categories")'>Obriši sve kategorije</button></li>
        <li><button class="btn btn-danger btn-large" @onclick='() => ConfirmDelete("savings")'>Obriši sve štednje</button></li>
    </ul>
</div>

@if (ShowConfirm)
{
    <div class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3>Potvrda brisanja</h3>
            </div>
            <div class="modal-body">
                <p>⚠️ Da li ste sigurni da želite da obrišete <strong>@DeleteTargetText</strong>?</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" @onclick="() => ShowConfirm = false">Ne</button>
                <button class="btn btn-danger" @onclick="DeleteConfirmed">Da</button>
            </div>
        </div>
    </div>
}
</div>

@code {
    private bool ShowConfirm = false;
    private string DeleteTarget = "";
    private string DeleteTargetText = "";

    private void ConfirmDelete(string target)
    {
        DeleteTarget = target;
        DeleteTargetText = target switch
        {
            "transactions" => "sve transakcije",
            "categories" => "sve kategorije",
            "savings" => "sve štednje",
            _ => "nepoznato"
        };
        ShowConfirm = true;
    }

    private async Task DeleteConfirmed()
    {
        ShowConfirm = false;

        switch (DeleteTarget)
        {
            case "transactions":
                await TransactionService.DeleteAllTransactions();
                break;
            case "categories":
                await TransactionService.DeleteAllCategories();
                break;
            case "savings":
                await TransactionService.DeleteAllSavings();
                break;
        }
    }
}
